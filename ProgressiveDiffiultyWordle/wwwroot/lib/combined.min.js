var PDW;!function(t){class e{}e.ValidCharacters=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.EligibleWords=e}(PDW=PDW||{}),function(t){t.GameOptions=class{}}(PDW=PDW||{}),function(t){(t=t.LetterStatus||(t.LetterStatus={}))[t.Unknown=0]="Unknown",t[t.ExactMatch=1]="ExactMatch",t[t.WrongLocation=2]="WrongLocation",t[t.Absent=3]="Absent"}(PDW=PDW||{}),function(c){c.GuessDetails=class{constructor(e,s){this.guess=e,this.characterStates=new Array(5);var a=new Map,r=new Map;for(let t=0;t<s.length;t++)this.updateCharacterMap(a,s,t),this.updateCharacterMap(r,e,t);this.populateCharacterStates(r,a),this.fullMatch=this.characterStates.every(t=>t==c.LetterStatus.ExactMatch)}updateCharacterMap(t,e,s){t.has(e[s])?t.get(e[s]).push(s):t.set(e[s],[s])}populateCharacterStates(t,e){for(var s of t.keys()){var r=t.get(s);if(e.has(s)){let a=e.get(s);if(a.length>=r.length)for(var n of r)this.characterStates[n]=-1<a.indexOf(n)?c.LetterStatus.ExactMatch:c.LetterStatus.WrongLocation;else{let e=0,s=[];for(var i of r){-1<a.indexOf(i)?(this.characterStates[i]=c.LetterStatus.ExactMatch,e+=1):(this.characterStates[i]=c.LetterStatus.Absent,s.push(i));let t=a.length-e;if(0<t)for(t;0<t;t--)this.characterStates[s.shift()]=c.LetterStatus.WrongLocation}}}}}}}(PDW=PDW||{}),function(t){t.LetterState=class{constructor(){this.Absent=[]}}}(PDW=PDW||{}),function(t){(t=t.GameType||(t.GameType={}))[t.Single=0]="Single",t[t.Endless=1]="Endless",t[t.ProgressiveDifficulty=2]="ProgressiveDifficulty"}(PDW=PDW||{}),function(t){t.ScoreDetails=class{}}(PDW=PDW||{}),function(t){t.Session=class{}}(PDW=PDW||{}),function(t){t.SessionState=class{}}(PDW=PDW||{}),function(a){a.SingleGame=class{constructor(t){this.options=t,this.chosenWord=a.EligibleWords.EligibleAnswers[Math.floor(Math.random()*a.EligibleWords.EligibleAnswers.length)],this.letterState=new a.LetterState,this.userGuesses=[],this.startTime=new Date}validateGuess(t){}processGuess(e){e=e.toLowerCase();var s=new a.GuessDetails(e,this.chosenWord);this.userGuesses.push(s),!s.fullMatch&&this.userGuesses.length!=this.options.maxGuesses||(this.endTime=new Date);for(let t=0;t<s.characterStates.length;t++)switch(s.characterStates[t]){case a.LetterStatus.ExactMatch:this.letterState.ExactMatch.set(t,e[t]);break;case a.LetterStatus.WrongLocation:this.letterState.PresentBadLocations.has(e[t])&&-1<this.letterState.PresentBadLocations.get(e[t]).indexOf(t)?this.letterState.PresentBadLocations.get(e[t]).push(t):this.letterState.PresentBadLocations.has(e[t])||this.letterState.PresentBadLocations.set(e[t],[t]);break;case a.LetterStatus.Absent:-1===this.letterState.Absent.indexOf(e[t])&&this.letterState.Absent.push(e[t]);break;default:throw new Error(`Invalid status for guess input at ${t}: status of `+s.characterStates[t])}}}}(PDW=PDW||{});