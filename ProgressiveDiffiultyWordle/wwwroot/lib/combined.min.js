var PDW;!function(t){t.EligibleWords=class{}}(PDW=PDW||{}),function(t){t.GameOptions=class{}}(PDW=PDW||{}),function(t){(t=t.LetterStatus||(t.LetterStatus={}))[t.Unknown=0]="Unknown",t[t.ExactMatch=1]="ExactMatch",t[t.WrongLocation=2]="WrongLocation",t[t.Absent=3]="Absent"}(PDW=PDW||{}),function(h){h.GuessDetails=class{constructor(e,s){this.guess=e,this.characterStates=new Array(5);var a=new Map,r=new Map;for(let t=0;t<s.length;t++)this.updateCharacterMap(a,s,t),this.updateCharacterMap(r,e,t);this.populateCharacterStates(r,a),this.fullMatch=this.characterStates.every(t=>t===h.LetterStatus.ExactMatch)}updateCharacterMap(t,e,s){t.has(e[s])?t.get(e[s]).push(s):t.set(e[s],[s])}populateCharacterStates(t,e){for(var s of t.keys()){var r=t.get(s);if(e.has(s)){let a=e.get(s);if(a.length>=r.length)for(var i of r)this.characterStates[i]=-1<a.indexOf(i)?h.LetterStatus.ExactMatch:h.LetterStatus.WrongLocation;else{let e=0,s=[];for(var n of r){-1<a.indexOf(n)?(this.characterStates[n]=h.LetterStatus.ExactMatch,e+=1):(this.characterStates[n]=h.LetterStatus.Absent,s.push(n));let t=a.length-e;if(0<t)for(t;0<t;t--)this.characterStates[s.shift()]=h.LetterStatus.WrongLocation}}}}}}}(PDW=PDW||{}),function(t){t.LetterState=class{constructor(){this.Absent=[]}}}(PDW=PDW||{}),function(t){(t=t.GameType||(t.GameType={}))[t.Single=0]="Single",t[t.Endless=1]="Endless",t[t.ProgressiveDifficulty=2]="ProgressiveDifficulty"}(PDW=PDW||{}),function(t){t.ScoreDetails=class{}}(PDW=PDW||{}),function(t){t.Session=class{}}(PDW=PDW||{}),function(t){t.SessionState=class{}}(PDW=PDW||{}),function(a){a.SingleGame=class{constructor(t){this.options=t,this.chosenWord=a.EligibleWords.eligibleAnswers[Math.floor(Math.random()*a.EligibleWords.eligibleAnswers.length)],this.letterState=new a.LetterState,this.userGuesses=[],this.startTime=new Date}guessTrigger(t){return t=t.toLowerCase(),this.validateGuess(t)&&this.finalizeGuess(t),void 0!==this.endTime}validateGuess(e){if(void 0!==this.endTime)return!1;if(this.options.maxGuesses<=this.userGuesses.length)return!1;if(e.match(/[a-z]/g).length!=e.length)return!1;if(this.options.hardMode)for(let t=0;t<e.length;t++)if(this.letterState.ExactMatch.has(t)&&e[t]!=this.letterState.ExactMatch.get(t))return!1;return!0}finalizeGuess(e){e=e.toLowerCase();var s=new a.GuessDetails(e,this.chosenWord);!s.fullMatch&&this.userGuesses.length!==this.options.maxGuesses||(this.endTime=new Date);for(let t=0;t<s.characterStates.length;t++)switch(s.characterStates[t]){case a.LetterStatus.ExactMatch:this.letterState.ExactMatch.set(t,e[t]);break;case a.LetterStatus.WrongLocation:this.letterState.PresentBadLocations.has(e[t])&&-1<this.letterState.PresentBadLocations.get(e[t]).indexOf(t)?this.letterState.PresentBadLocations.get(e[t]).push(t):this.letterState.PresentBadLocations.has(e[t])||this.letterState.PresentBadLocations.set(e[t],[t]);break;case a.LetterStatus.Absent:-1===this.letterState.Absent.indexOf(e[t])&&this.letterState.Absent.push(e[t]);break;default:throw new Error(`Invalid status for guess input at ${t}: status of `+s.characterStates[t])}this.userGuesses.push(s)}}}(PDW=PDW||{});